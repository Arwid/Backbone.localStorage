(function(){
/*!
  Backbone localStorage Adapter v1.0
  https://github.com/Arwid/Backbone.localStorage
  */
var e,d,a,c;var b=function(f,g){return function(){return f.apply(g,arguments)}};window.LocalStore=(function(){var g;g="id";function f(j,i){var h;this.collection=j;this.name=i;this._save=b(this._save,this);this.create=b(this.create,this);this.collection.sync=e;this.collection.model.prototype.sync=e;this.collection.store=this;g=this.collection.model.prototype.idAttribute;h=localStorage.getItem(this.name);this.records=(h&&h.split(","))||[]}f.prototype.create=function(i){var h;h={};if(!i.id){h[g]=a()}i.set(h);return this._save(i)};f.prototype.find=function(h){return JSON.parse(localStorage.getItem(this.name+"-"+h.id))};f.prototype.findAll=function(){return _.map(this.records,(function(h){return JSON.parse(localStorage.getItem(this.name+"-"+h))}),this)};f.prototype.update=function(h){return this._save(h)};f.prototype.destroy=function(h){localStorage.removeItem(this.name+"-"+h.id);this.records=_.reject(this.records,function(i){return i===h.id.toString()});this._save();return h};f.prototype.clear=function(){localStorage.removeItem(this.name);_.each(this.records,$.proxy(function(h){return localStorage.removeItem(this.name+"-"+h.id)},this));return this.records=[]};f.prototype._save=function(h){if(h==null){h=void 0}if(h){this._saveModel(h)}localStorage.setItem(this.name,this.records.join(","));return h};f.prototype._saveModel=function(h){localStorage.setItem(this.name+"-"+h.id,JSON.stringify(h));if(!_.include(this.records,h.id.toString())){return this.records.push(h.id.toString())}};return f})();e=function(k,i,h,g){var j,f;if(typeof h==="function"){h={success:h,error:g}}f=i.store||i.collection.store;switch(k){case"create":j=f.create(i);break;case"read":j=(i.id?f.find(i):f.findAll());break;case"update":j=f.update(i);break;case"delete":j=f.destroy(i)}if(j){return h.success(j)}else{return h.error("Record not found")}};d=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};c=function(){return _S4()+_S4()+"-"+_S4()+"-"+_S4()+"-"+_S4()+"-"+_S4()+_S4()+_S4()};a=function(){return _S4()+_S4()+_S4()+_S4()+_S4()+_S4()};window.Store=LocalStore}).call(this);